{"remainingRequest":"/home/dario/Radna površina/Dario Knezović/Programiranje/Vue/vue/node_modules/babel-loader/lib/index.js!/home/dario/Radna površina/Dario Knezović/Programiranje/Vue/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dario/Radna površina/Dario Knezović/Programiranje/Vue/vue/src/components/Header.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dario/Radna površina/Dario Knezović/Programiranje/Vue/vue/src/components/Header.vue","mtime":1538681893851},{"path":"/home/dario/Radna površina/Dario Knezović/Programiranje/Vue/vue/node_modules/cache-loader/dist/cjs.js","mtime":0},{"path":"/home/dario/Radna površina/Dario Knezović/Programiranje/Vue/vue/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/home/dario/Radna površina/Dario Knezović/Programiranje/Vue/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport EventBus from '../event-bus';\nexport default {\n  name: \"Header\",\n  data: function data() {\n    return {\n      userInfo: [],\n      dropdownShow: false,\n      showHeader: false\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.checkIsLoggedIn();\n    this.getUserInfo();\n    EventBus.$on('logged', function () {\n      _this.showHeader = true;\n\n      _this.getUserInfo();\n    });\n    EventBus.$on('logout', function () {\n      _this.showHeader = false;\n    });\n  },\n  methods: {\n    showDropDown: function showDropDown(event) {\n      this.dropdownShow = !this.dropdownShow;\n    },\n    checkIsLoggedIn: function checkIsLoggedIn() {\n      if (!this.$cookie.get('rememberToken')) {\n        this.$router.push({\n          name: 'login',\n          query: {\n            redirect: '/login'\n          }\n        });\n      } else {\n        this.$nextTick(function () {\n          this.showHeader = true;\n        });\n      }\n    },\n    getUserInfo: function getUserInfo() {\n      var _this2 = this;\n\n      if (this.$cookie.get('rememberToken') != null) {\n        var remember_token = {\n          \"remember_token\": this.$cookie.get('rememberToken').trim().replace(/['\"]+/g, '')\n        };\n        this.$http.post('http://localhost:3030/userInfo', remember_token).then(function (response) {\n          _this2.userInfo = response.body;\n        });\n      }\n    },\n    checkRole: function checkRole() {\n      return this.userInfo.role_id == 1;\n    }\n  }\n};",{"version":3,"sources":["Header.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA,OAAA,QAAA,MAAA,cAAA;AAEA,eAAA;AACA,QAAA,QADA;AAEA,MAFA,kBAEA;AACA,WAAA;AACA,gBAAA,EADA;AAEA,oBAAA,KAFA;AAGA,kBAAA;AAHA,KAAA;AAKA,GARA;AASA,WAAA,mBAAA;AAAA;;AACA,SAAA,eAAA;AACA,SAAA,WAAA;AACA,aAAA,GAAA,CAAA,QAAA,EAAA,YAAA;AACA,YAAA,UAAA,GAAA,IAAA;;AACA,YAAA,WAAA;AACA,KAHA;AAKA,aAAA,GAAA,CAAA,QAAA,EAAA,YAAA;AACA,YAAA,UAAA,GAAA,KAAA;AACA,KAFA;AAIA,GArBA;AAsBA,WAAA;AACA,kBAAA,sBAAA,KAAA,EAAA;AACA,WAAA,YAAA,GAAA,CAAA,KAAA,YAAA;AACA,KAHA;AAIA,qBAAA,2BAAA;AACA,UAAA,CAAA,KAAA,OAAA,CAAA,GAAA,CAAA,eAAA,CAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA;AAAA,gBAAA,OAAA;AAAA,iBAAA;AAAA,sBAAA;AAAA;AAAA,SAAA;AACA,OAFA,MAEA;AACA,aAAA,SAAA,CAAA,YAAA;AACA,eAAA,UAAA,GAAA,IAAA;AACA,SAFA;AAGA;AACA,KAZA;AAaA,iBAAA,uBAAA;AAAA;;AACA,UAAA,KAAA,OAAA,CAAA,GAAA,CAAA,eAAA,KAAA,IAAA,EAAA;AACA,YAAA,iBAAA;AACA,4BAAA,KAAA,OAAA,CAAA,GAAA,CAAA,eAAA,EAAA,IAAA,GAAA,OAAA,CAAA,QAAA,EAAA,EAAA;AADA,SAAA;AAGA,aAAA,KAAA,CAAA,IAAA,CAAA,gCAAA,EAAA,cAAA,EAAA,IAAA,CAAA,oBAAA;AACA,iBAAA,QAAA,GAAA,SAAA,IAAA;AACA,SAFA;AAGA;AACA,KAtBA;AAuBA,eAAA,qBAAA;AACA,aAAA,KAAA,QAAA,CAAA,OAAA,IAAA,CAAA;AACA;AAzBA;AAtBA,CAAA","sourcesContent":["<template>\n    <div id=\"header\" v-show=\"showHeader\">\n        <div class=\"userInfo noselect\" v-on:click=\"showDropDown\">\n            {{userInfo.username}}\n            <img src=\"https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png\" class=\"userIcon\">\n            <div class=\"dropdown\" v-show=\"dropdownShow\">\n                <div class=\"dropdown-content\">Edit profile</div>\n                <div class=\"dropdown-content\" v-show=\"checkRole()\"><router-link to=\"/books\">All books</router-link></div>\n                <div class=\"dropdown-content\"><router-link to=\"/reserved-books\">Reserved books</router-link></div>\n                <div class=\"dropdown-content\"> <router-link to=\"/logout\">Logout</router-link></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import EventBus from '../event-bus';\n\n    export default {\n        name: \"Header\",\n        data() {\n            return {\n                userInfo: [],\n                dropdownShow: false,\n                showHeader: false,\n            }\n        },\n        created: function () {\n            this.checkIsLoggedIn();\n            this.getUserInfo();\n            EventBus.$on('logged', () => {\n                this.showHeader = true;\n                this.getUserInfo();\n            });\n\n            EventBus.$on('logout', () => {\n                this.showHeader = false;\n            });\n\n        },\n        methods: {\n            showDropDown: function(event) {\n                this.dropdownShow = !this.dropdownShow;\n            },\n            checkIsLoggedIn: function () {\n                if ( !(this.$cookie.get('rememberToken')) ) {\n                    this.$router.push({name: 'login', query: {redirect: '/login'} });\n                }else {\n                    this.$nextTick(function () {\n                        this.showHeader = true;\n                    })\n                }\n            },\n            getUserInfo: function() {\n                if (this.$cookie.get('rememberToken') != null) {\n                    var remember_token = {\n                        \"remember_token\":  this.$cookie.get('rememberToken').trim().replace(/['\"]+/g, ''),\n                    };\n                    this.$http.post('http://localhost:3030/userInfo', remember_token).then(response => {\n                        this.userInfo = response.body;\n                    });\n                }\n            },\n            checkRole: function () {\n                return this.userInfo.role_id == 1;\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    #header {\n        background: #fff;\n        width: 100%;\n        height: 64px;\n    }\n\n    .noselect {\n        -webkit-touch-callout: none; /* iOS Safari */\n        -webkit-user-select: none; /* Safari */\n        -khtml-user-select: none; /* Konqueror HTML */\n        -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n        user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome and Opera */\n    }\n\n    .userInfo {\n        height: 100%;\n        float: right;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 24px;\n        font-weight: bold;\n        cursor: default;\n        width: 200px;\n    }\n\n    .userIcon {\n        height: 52px;\n        margin-left: 20px;\n    }\n\n    .dropdown {\n        top: 64px;\n        position: absolute;\n        background: #fff;\n        width: 200px;\n    }\n\n    .dropdown-content {\n        padding: 10px 0px;\n        font-size: 18px;\n    }\n\n    .dropdown-content > a {\n        text-decoration: none;\n        color: inherit;\n    }\n\n    .dropdown-content:hover {\n        background: #696969;\n        color: #fff;\n    }\n</style>"],"sourceRoot":"src/components"}]}